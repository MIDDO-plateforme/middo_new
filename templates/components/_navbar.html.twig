{# ============================================================
   FICHIER : templates/components/_navbar.html.twig
   Navbar globale MIDDO
   ============================================================ #}

<nav class="navbar" style="
    background: var(--middo-gradient);
    color: white;
    padding: 0.75rem 1.5rem;
    display: flex;
    align-items: center;
    justify-content: space-between;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    z-index: 1000;
">
    <div class="navbar-left" style="display:flex;align-items:center;gap:1rem;">
        <a href="{{ path('travail_index') }}"
           style="color:white;text-decoration:none;font-weight:700;font-size:1.1rem;">
            MIDDO
        </a>

        <span style="opacity:0.8;font-size:0.9rem;">
            Plateforme collaborative avec IA
        </span>
    </div>

    <div class="navbar-right" style="display:flex;align-items:center;gap:1rem;font-size:0.9rem;">

        {# Lien principal vers l’espace de travail (route stable) #}
        <a href="{{ path('travail_index') }}" style="color:white;text-decoration:none;font-weight:600;">
            Espace de travail
        </a>

        {# Icône alertes en temps réel #}
        {% include 'components/_alerts_icon.html.twig' with { alerts: alerts ?? [] } %}

        {# Profil utilisateur #}
        {% if app.user %}
            <span style="opacity:0.8;">
                {{ app.user.fullName ?? app.user.email }}
                ({{ app.user.roles|join(', ') }})
            </span>

            <a href="{{ path('app_logout') }}" style="color:white;text-decoration:none;">
                Déconnexion
            </a>
        {% else %}
            <a href="{{ path('app_login') }}" style="color:white;text-decoration:none;">
                Connexion
            </a>
        {% endif %}
    </div>
</nav>
