{#
    ================================================================
    MIDDO - COMPOSANT MENU R√âUTILISABLE
    Session 24 - Phase 2 - Option D
    ================================================================
    
    Usage:
    {% include 'components/_menu.html.twig' with {
        'current_route': app.request.attributes.get('_route')
    } %}
#}

{# D√©finir les √©l√©ments du menu #}
{% set menu_items = [
    {
        'route': 'app_home',
        'path': '/',
        'icon': 'üè†',
        'label': 'Accueil',
        'badge': null
    },
    {
        'route': 'app_annuaire',
        'path': '/annuaire',
        'icon': '',
        'label': 'Annuaire',
        'badge': null
    },
    {
        'route': 'app_banque',
        'path': '/banque',
        'icon': '',
        'label': 'Banque',
        'badge': null
    },
    {
        'route': 'app_projets',
        'path': '/projets',
        'icon': '',
        'label': 'Projets',
        'badge': null
    },
    {
        'route': 'app_messages',
        'path': '/messages',
        'icon': '',
        'label': 'Messages',
        'badge': null
    },
    {
        'route': 'app_visio',
        'path': '/visio',
        'icon': '',
        'label': 'Visio',
        'badge': null
    },
    {
        'route': 'app_analytics',
        'path': '/analytics',
        'icon': '',
        'label': 'Analytics',
        'badge': null
    },
    {
        'route': 'app_travail',
        'path': '/travail',
        'icon': '',
        'label': 'Travail',
        'badge': null
    }
] %}

{# R√©cup√©rer la route actuelle #}
{% set current_route = current_route|default(app.request.attributes.get('_route')) %}
{% set current_path = app.request.pathinfo %}

{# G√©n√©rer les liens du menu #}
<nav class="menu-nav" role="navigation" aria-label="Navigation principale">
    {% for item in menu_items %}
        {% set is_active = (current_route == item.route) or (current_path starts with item.path and item.path != '/') %}
        
        <a href="{{ item.path }}" 
           class="menu-link {{ is_active ? 'active' : '' }}"
           {% if is_active %}aria-current="page"{% endif %}
           title="{{ item.label }}">
            
            <span class="menu-icon">{{ item.icon }}</span>
            <span class="menu-label">{{ item.label }}</span>
            
            {% if item.badge %}
                <span class="menu-badge">{{ item.badge }}</span>
            {% endif %}
        </a>
    {% endfor %}
</nav>