{% extends 'base.html.twig' %}

{% block title %}Modifier mon profil{% endblock %}

{% block body %}
<div class="max-w-6xl mx-auto py-8 px-4">
    <div class="card-middo">
        <!-- Header -->
        <div class="bg-gradient-to-r from-middo-primary to-middo-secondary text-white p-6 rounded-t-lg">
            <h3 class="text-2xl font-bold flex items-center">
                <i class="fas fa-user-edit mr-3"></i>
                Modifier mon profil
            </h3>
        </div>

        <!-- Body -->
        <div class="p-6">
            {{ form_start(form) }}
            
            <div class="space-y-4">
                <!-- Infos de base -->
                <div class="border border-gray-200 rounded-lg overflow-hidden">
                    <button type="button" class="accordion-button w-full cursor-pointer bg-gray-50 hover:bg-gray-100 p-4 font-semibold text-lg flex justify-between items-center text-left" onclick="toggleAccordion('section-basic', this)">
                        <span>ðŸ“‹ Informations de base</span>
                        <i class="fas fa-chevron-down transition-transform duration-300"></i>
                    </button>
                    <div id="section-basic" class="accordion-content p-6 bg-white">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>{{ form_row(form.firstName) }}</div>
                            <div>{{ form_row(form.lastName) }}</div>
                        </div>
                    </div>
                </div>

                <!-- Infos personnelles -->
                <div class="border border-gray-200 rounded-lg overflow-hidden">
                    <button type="button" class="accordion-button w-full cursor-pointer bg-gray-50 hover:bg-gray-100 p-4 font-semibold text-lg flex justify-between items-center text-left" onclick="toggleAccordion('section-personal', this)">
                        <span>ðŸ‘¤ Informations personnelles</span>
                        <i class="fas fa-chevron-down transition-transform duration-300"></i>
                    </button>
                    <div id="section-personal" class="accordion-content hidden p-6 bg-white space-y-6">
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                            <div>{{ form_row(form.genre) }}</div>
                            <div>{{ form_row(form.situationFamiliale) }}</div>
                            <div>{{ form_row(form.dateNaissance) }}</div>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>{{ form_row(form.telephone) }}</div>
                            <div>{{ form_row(form.villeActuelle) }}</div>
                            <div>{{ form_row(form.paysResidence) }}</div>
                            <div>{{ form_row(form.nationalite) }}</div>
                        </div>
                    </div>
                </div>

                <!-- Formation -->
                <div class="border border-gray-200 rounded-lg overflow-hidden">
                    <button type="button" class="accordion-button w-full cursor-pointer bg-gray-50 hover:bg-gray-100 p-4 font-semibold text-lg flex justify-between items-center text-left" onclick="toggleAccordion('section-education', this)">
                        <span>ðŸŽ“ Formation & CompÃ©tences</span>
                        <i class="fas fa-chevron-down transition-transform duration-300"></i>
                    </button>
                    <div id="section-education" class="accordion-content hidden p-6 bg-white space-y-6">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>{{ form_row(form.niveauEtudes) }}</div>
                            <div>{{ form_row(form.domaineExpertise) }}</div>
                        </div>
                        <div>{{ form_row(form.ceQueVousSavezFaire) }}</div>
                        <div>{{ form_row(form.languesParlees) }}</div>
                        <div>{{ form_row(form.certifications) }}</div>
                    </div>
                </div>

                <!-- Situation pro -->
                <div class="border border-gray-200 rounded-lg overflow-hidden">
                    <button type="button" class="accordion-button w-full cursor-pointer bg-gray-50 hover:bg-gray-100 p-4 font-semibold text-lg flex justify-between items-center text-left" onclick="toggleAccordion('section-professional', this)">
                        <span>ðŸ’¼ Situation professionnelle</span>
                        <i class="fas fa-chevron-down transition-transform duration-300"></i>
                    </button>
                    <div id="section-professional" class="accordion-content hidden p-6 bg-white space-y-6">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>{{ form_row(form.statutEmploi) }}</div>
                            <div>{{ form_row(form.posteActuel) }}</div>
                            <div>{{ form_row(form.anneesExperience) }}</div>
                            <div>{{ form_row(form.secteurActivite) }}</div>
                        </div>
                    </div>
                </div>

                <!-- Aspirations -->
                <div class="border border-gray-200 rounded-lg overflow-hidden">
                    <button type="button" class="accordion-button w-full cursor-pointer bg-gray-50 hover:bg-gray-100 p-4 font-semibold text-lg flex justify-between items-center text-left" onclick="toggleAccordion('section-aspirations', this)">
                        <span>ðŸŽ¯ Objectifs & Aspirations</span>
                        <i class="fas fa-chevron-down transition-transform duration-300"></i>
                    </button>
                    <div id="section-aspirations" class="accordion-content hidden p-6 bg-white space-y-6">
                        <div>{{ form_row(form.objectifsProfessionnels) }}</div>
                        <div>{{ form_row(form.ceQueVousAimezFaire) }}</div>
                        <div>{{ form_row(form.talentCache) }}</div>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div class="flex items-center space-x-2">
                                {{ form_widget(form.pretASeFormer, {'attr': {'class': 'rounded'}}) }}
                                {{ form_label(form.pretASeFormer, null, {'label_attr': {'class': 'ml-2'}}) }}
                            </div>
                            <div class="flex items-center space-x-2">
                                {{ form_widget(form.pretAVousExporter, {'attr': {'class': 'rounded'}}) }}
                                {{ form_label(form.pretAVousExporter, null, {'label_attr': {'class': 'ml-2'}}) }}
                            </div>
                            <div class="flex items-center space-x-2">
                                {{ form_widget(form.disponiblePourMissions, {'attr': {'class': 'rounded'}}) }}
                                {{ form_label(form.disponiblePourMissions, null, {'label_attr': {'class': 'ml-2'}}) }}
                            </div>
                            <div class="flex items-center space-x-2">
                                {{ form_widget(form.rechercheEmploi, {'attr': {'class': 'rounded'}}) }}
                                {{ form_label(form.rechercheEmploi, null, {'label_attr': {'class': 'ml-2'}}) }}
                            </div>
                            <div class="flex items-center space-x-2">
                                {{ form_widget(form.sansEmploi, {'attr': {'class': 'rounded'}}) }}
                                {{ form_label(form.sansEmploi, null, {'label_attr': {'class': 'ml-2'}}) }}
                            </div>
                        </div>
                    </div>
                </div>

                <!-- RÃ©seau -->
                <div class="border border-gray-200 rounded-lg overflow-hidden">
                    <button type="button" class="accordion-button w-full cursor-pointer bg-gray-50 hover:bg-gray-100 p-4 font-semibold text-lg flex justify-between items-center text-left" onclick="toggleAccordion('section-network', this)">
                        <span>ðŸ”— RÃ©seau & Liens</span>
                        <i class="fas fa-chevron-down transition-transform duration-300"></i>
                    </button>
                    <div id="section-network" class="accordion-content hidden p-6 bg-white space-y-6">
                        <div>{{ form_row(form.linkedinUrl) }}</div>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>{{ form_row(form.siteWebUrl) }}</div>
                            <div>{{ form_row(form.portfolioUrl) }}</div>
                        </div>
                        <div>{{ form_row(form.bio) }}</div>
                    </div>
                </div>
            </div>

            <!-- Boutons d'action -->
            <div class="mt-8 flex flex-col sm:flex-row gap-4">
                <button type="submit" class="btn-middo bg-gradient-to-r from-middo-primary to-middo-secondary text-white">
                    <i class="fas fa-save mr-2"></i>Enregistrer les modifications
                </button>
                <a href="{{ path('app_profile') }}" class="btn-middo border border-gray-300 text-gray-700 hover:bg-gray-50">
                    <i class="fas fa-times mr-2"></i>Annuler
                </a>
            </div>

            {{ form_end(form) }}
        </div>
    </div>
</div>

<style>
/* Style pour les formulaires Symfony avec Tailwind */
.form-control, input[type="text"], input[type="email"], input[type="tel"], input[type="date"], 
input[type="number"], select, textarea {
    @apply w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-middo-primary focus:border-transparent transition;
}

label {
    @apply block text-sm font-medium text-gray-700 mb-2;
}

.form-error {
    @apply text-red-600 text-sm mt-1;
}

/* Rotation de la flÃ¨che quand ouvert */
.accordion-button.active i {
    transform: rotate(180deg);
}
</style>

<script>
// JavaScript pour les accordÃ©ons
function toggleAccordion(targetId, button) {
    const targetContent = document.getElementById(targetId);
    
    // Toggle du contenu
    targetContent.classList.toggle('hidden');
    
    // Toggle de la classe active pour la rotation de la flÃ¨che
    button.classList.toggle('active');
}

// Ouvrir le premier accordÃ©on par dÃ©faut au chargement de la page
document.addEventListener('DOMContentLoaded', function() {
    const firstButton = document.querySelector('.accordion-button');
    if (firstButton) {
        firstButton.classList.add('active');
    }
});
</script>
{% endblock %}
