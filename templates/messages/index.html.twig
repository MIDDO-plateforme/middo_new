{% extends 'layout/app_layout.html.twig' %}

{% block page_title %}
    Messages
{% endblock %}

{% block page_subtitle %}
    Vos conversations et échanges
{% endblock %}

{% block page_actions %}
    {# Exemple : bouton pour créer une nouvelle conversation #}
    <button class="btn btn-primary">Nouvelle conversation</button>
{% endblock %}

{% block page_content %}

<div class="messages-layout">

    {# --- Liste des conversations --- #}
    <aside class="messages-list" aria-label="Liste des conversations">
        <h3>Conversations</h3>

        {% for conv in conversations %}
            <div class="conversation-item {{ conv.active ? 'active' : '' }}">
                <div class="avatar">{{ conv.initials }}</div>
                <div class="conversation-info">
                    <strong>{{ conv.name }}</strong>
                    <small>{{ conv.last_message }}</small>
                </div>
            </div>
        {% endfor %}
    </aside>

    {# --- Zone de chat --- #}
    <section class="chat-window" aria-label="Fenêtre de discussion">

        <div class="chat-header">
            <h3>{{ active.name }}</h3>
            <small>{{ active.status }}</small>
        </div>

        <div class="chat-messages">
            {% for msg in active.messages %}
                <div class="chat-message {{ msg.from == 'me' ? 'me' : 'them' }}">
                    <p>{{ msg.text }}</p>
                    <small>{{ msg.time }}</small>
                </div>
            {% endfor %}
        </div>

        <div class="chat-input">
            <input type="text" placeholder="Écrire un message…" aria-label="Écrire un message">
            <button class="btn">Envoyer</button>
            <button class="btn-outline">Réponse IA</button>
        </div>

    </section>

</div>

{% endblock %}
